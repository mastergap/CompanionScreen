#include "splashcreen.h"

const unsigned char epd_bitmap_banana [] PROGMEM = {
	0x01, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x07, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x06, 0x30, 0x00, 0x00, 
	0x00, 0x00, 0x0c, 0x18, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x08, 0x0c, 
	0x00, 0x00, 0x00, 0x00, 0x08, 0x04, 0x00, 0x00, 0x00, 0x00, 0x08, 0x06, 0x00, 0x00, 0x00, 0x00, 
	0x08, 0x02, 0x00, 0x00, 0x00, 0x00, 0x08, 0x02, 0x00, 0x00, 0x00, 0x00, 0x08, 0x03, 0x00, 0x00, 
	0x00, 0x00, 0x08, 0x03, 0x00, 0x00, 0x00, 0x00, 0x08, 0x01, 0x00, 0x00, 0x00, 0x00, 0x08, 0x01, 
	0x80, 0x00, 0x00, 0x00, 0x08, 0x00, 0x80, 0x00, 0x00, 0x00, 0x0c, 0x00, 0xc0, 0x00, 0x00, 0x00, 
	0x0c, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x5f, 0xc0, 0x00, 0x00, 0x0c, 0x00, 0x78, 0xf0, 
	0x00, 0x00, 0x04, 0x00, 0x60, 0x1c, 0x00, 0x00, 0x04, 0x00, 0xc0, 0x0e, 0x00, 0x00, 0x06, 0x01, 
	0x80, 0x03, 0x00, 0x00, 0x06, 0x01, 0x80, 0x01, 0x80, 0x00, 0x02, 0x01, 0x00, 0x00, 0x80, 0x00, 
	0x03, 0x01, 0x0f, 0x80, 0xc0, 0x00, 0x03, 0xfd, 0x7f, 0xf0, 0xc0, 0x00, 0x03, 0xff, 0xe3, 0x1c, 
	0xc0, 0x00, 0x07, 0x07, 0x81, 0x87, 0x80, 0x00, 0x0e, 0x0e, 0xc1, 0xc0, 0x00, 0x00, 0x0c, 0x0c, 
	0x40, 0xe0, 0x00, 0x00, 0x18, 0x18, 0x60, 0x30, 0x00, 0x00, 0x18, 0x18, 0x30, 0x1c, 0x00, 0x00, 
	0x30, 0x18, 0x18, 0x0e, 0x00, 0x00, 0x30, 0x10, 0x0c, 0x03, 0x80, 0x00, 0x30, 0x18, 0x06, 0x00, 
	0xf0, 0x00, 0x30, 0x1c, 0x03, 0x00, 0x3c, 0x00, 0x30, 0x1c, 0x01, 0x80, 0x07, 0x80, 0x30, 0x1e, 
	0x00, 0xe0, 0x00, 0xf0, 0x10, 0x1b, 0x00, 0x38, 0x00, 0x38, 0x18, 0x19, 0xc0, 0x1e, 0x00, 0x0c, 
	0x18, 0x0c, 0xe0, 0x07, 0xc0, 0x0c, 0x0c, 0x0c, 0x30, 0x00, 0xff, 0xfc, 0x0c, 0x0c, 0x1c, 0x00, 
	0x0f, 0xfc, 0x06, 0x06, 0x07, 0x00, 0x00, 0x18, 0x07, 0x06, 0x03, 0xc0, 0x00, 0x30, 0x03, 0xc6, 
	0x00, 0xf8, 0x00, 0xe0, 0x00, 0xfc, 0x00, 0x1f, 0xff, 0xc0, 0x00, 0x7c, 0x00, 0x00, 0xf8, 0x00
};


void playSplash(Adafruit_SSD1306 &display) {
    int bananaW = 48;
    int bananaH = 48;
    int targetY = (display.height() - bananaH) / 2;
    int centerX = (display.width() - bananaW) / 2;

    // --- Phase 1: move from top to the center of the screen ---
    for (int y = -bananaH; y <= targetY; y += 2) {
        display.clearDisplay();
        display.drawBitmap(centerX, y, epd_bitmap_banana, bananaW, bananaH, WHITE);
        display.display();
        delay(10); // Animation speed
    }

    // --- Phase 2: Zoom In & Out (Ease Effect) ---
    float scales[] = {1.0, 1.1, 1.2, 1.3, 1.2, 1.1, 1.0};
    for (float s : scales) {
        display.clearDisplay();
        int sw = bananaW * s;
        int sh = bananaH * s;
        int sx = (display.width() - sw) / 2;
        int sy = (display.height() - sh) / 2;
        
        display.drawBitmap(sx, sy, epd_bitmap_banana, bananaW, bananaH, WHITE);
        display.display();
        delay(40);
    }
    
    delay(2000);
}